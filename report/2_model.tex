\subsection{Matching model under preferences}\label{matching-model-under-preferences}%

Matching under preferences is a tool from cooperative game theory.
It can be applied to two-sided markets in which heterogeneous agents, or goods, of one side are to be distributed over agents or goods of the other side of the market, and the satisfaction of agents’ preferences, or respect for agents’ priorities, matter. \citet{gale_1962} and Shapley laid the theoretical foundations for the theory.

Matching markets with sizes arise in a variety of contexts, and in its simplest model, agents have ordinal preferences over objects that are available in multiple identical units. For each object, agents are ranked according to exogenous priorities. Agents can have a size of either one or two: single-unit agents require one unit of an object and double-unit agents require two units of the same object. The model can be extended in various ways to fit specific applications in the following ways:
\begin{itemize}
\item constraints may take place over several dimensions
\item agents may have preferences over both an object and a number of units
\item agents may desire units of different objects
\end{itemize}
An agent and an object form a blocking pair of a given matching if the agent prefers the object to his own and at least the number of units he requires are either unassigned or assigned to agents with a lower priority. Stability, initially introduced by \citet{gale_1962}, is a central concept in matching theory. A matching is stable if it does not have any blocking pair. In two-sided matching markets, with strategic agents on both sides, stability constitutes an essential equilibrium criterion, thus an unstable matching is not at equilibrium. A blocking pair is unfair in the sense that the agent is not able to get an object even though he has a high enough priority.

Stability can be characterized using axioms, each of which constitutes a fairness criterion. A matching is said to be size envy-free if, whenever an agent prefers an object to his own, all agents matched to that object have either a higher priority or a smaller size. Size envy-freeness is a fairness criterion in the sense that any priority violation can be justified by the agents' different sizes. Weak envy-freeness relaxes envy-freeness by allowing some innocuous priority violations. A matching is defined non-wasteful if, whenever an agent prefers an object to his own, the object has enough unassigned units for the agent to be matched to it without removing any other agent. Non-wastefulness constitutes both a fairness and an efficiency criterion as it ensures that units only remain unassigned if they cannot benefit any agent.

Envy-freeness allows waste which stability precludes; however, stability allows for some waste-eliminating priority violations. Weak envy-freeness is logically independent of stability in the same way as envy-freeness is. In contrast, stability only fails due to the presence of waste or via a priority violation  so if a matching is non-wasteful and weakly envy-free, then it is stable.
A graphic representation of the relationships between solutions is present in the figure~\ref{fig:matching}.
\begin{figure}[!htb]
    \def\svgwidth{\columnwidth}
    \subfile{media/matching.pdf_tex}
    \caption{Logical relationships among our solution concepts}
    \label{fig:matching}
\end{figure}
